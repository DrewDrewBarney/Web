<?php

// switch on display of errors
ini_set('display_errors', 1);
// stop html formatted errors from PHP as they are a pain to read in JSON return
ini_set('html_errors', false);
// include parsing library
include_once 'ParseFinalSurgeJSON.php';

$JSONstr = '{"workoutId":87717321,"workoutName":"TEST","sport":"RUNNING","poolLength":null,"poolLengthUnit":null,"steps":[{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"WARMUP","title":null,"comment":null,"durationType":"TIME","durationValue":5,"durationValueType":null,"primaryTargetType":"OPEN","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":0,"secondaryTargetValueLow":null,"primaryTargetValueHigh":0,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null},{"type":"WorkoutRepeatStep","repeatValue":5,"steps":[{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"ACTIVE","title":null,"comment":null,"durationType":"TIME","durationValue":120,"durationValueType":null,"primaryTargetType":"PACE","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":3.831762,"secondaryTargetValueLow":null,"primaryTargetValueHigh":3.831762,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null},{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"REST","title":null,"comment":null,"durationType":"TIME","durationValue":120,"durationValueType":null,"primaryTargetType":"PACE","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":2.6822334,"secondaryTargetValueLow":null,"primaryTargetValueHigh":2.6822334,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null}],"intensity":null,"title":null,"comment":null,"durationType":null,"durationValue":null,"durationValueType":null,"primaryTargetType":null,"secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":null,"secondaryTargetValueLow":null,"primaryTargetValueHigh":null,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null},{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"COOLDOWN","title":null,"comment":null,"durationType":"TIME","durationValue":5,"durationValueType":null,"primaryTargetType":"OPEN","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":0,"secondaryTargetValueLow":null,"primaryTargetValueHigh":0,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null}]}';

$result = parseFinalSurgeJSON($JSONstr);

echo json_encode($result);

