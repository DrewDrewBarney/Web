<?php
include_once 'ParseFinalSurgeJSON.php';


// final surge workout JSON as of 30 Aug 21

$JSONstr = '{"workoutId":92977653,"workoutName":"EZ Run with accelerations","sport":"RUNNING","poolLength":null,"poolLengthUnit":null,"steps":[{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"ACTIVE","title":"Easy","comment":"easy running","durationType":"TIME","durationValue":2700.0,"durationValueType":null,"primaryTargetType":"POWER","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":196.0,"secondaryTargetValueLow":null,"primaryTargetValueHigh":224.0,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null},{"type":"WorkoutRepeatStep","repeatValue":4.0,"steps":[{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"ACTIVE","title":"gradual acceleration to top speed","comment":null,"durationType":"TIME","durationValue":8.0,"durationValueType":null,"primaryTargetType":"POWER","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":280.0,"secondaryTargetValueLow":null,"primaryTargetValueHigh":560.0,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null},{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"REST","title":"resume easy running","comment":null,"durationType":"TIME","durationValue":112.0,"durationValueType":null,"primaryTargetType":"POWER","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":182.0,"secondaryTargetValueLow":null,"primaryTargetValueHigh":224.0,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null}],"intensity":null,"title":null,"comment":null,"durationType":null,"durationValue":null,"durationValueType":null,"primaryTargetType":null,"secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":null,"secondaryTargetValueLow":null,"primaryTargetValueHigh":null,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null},{"type":"WorkoutStep","repeatValue":null,"steps":null,"intensity":"ACTIVE","title":"continue easy running to finish","comment":"easy running","durationType":"TIME","durationValue":420.0,"durationValueType":null,"primaryTargetType":"POWER","secondaryTargetType":null,"primaryTargetValue":null,"secondaryTargetValue":null,"primaryTargetValueLow":196.0,"secondaryTargetValueLow":null,"primaryTargetValueHigh":224.0,"secondaryTargetValueHigh":null,"primaryTargetValueStart":null,"primaryTargetValueFinish":null,"primaryTargetValueType":null,"strokeType":null,"equipmentType":null,"exerciseCategory":null,"exerciseName":null,"weightValue":null,"weightDisplayUnit":null}]}';

$result = parseFinalSurgeJSONstring($JSONstr);

$flatten = json_encode($result);

echo $flatten;